graph TB
    %% Detailed Data Sources and Extraction Mapping
    %% Shows specific data elements extracted from each source
    
    classDef aihwSource fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef absSource fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef bomSource fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef schemaTarget fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef extractor fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    
    %% AIHW Data Sources
    subgraph "AIHW - Australian Institute of Health and Welfare"
        GRIM[GRIM Mortality Data<br/>â€¢ Cause of death by SA2<br/>â€¢ Age-standardised mortality rates<br/>â€¢ ICD-10 classification<br/>â€¢ Deaths count by demographic]
        
        Hospital[Hospital Separations<br/>â€¢ Principal diagnosis codes<br/>â€¢ Average length of stay<br/>â€¢ Separation rates by SA2<br/>â€¢ Hospital type classification]
        
        HealthPerf[Health Performance Indicators<br/>â€¢ Disease prevalence rates<br/>â€¢ Screening participation<br/>â€¢ Risk factor prevalence<br/>â€¢ Health behaviour metrics]
        
        MedServices[Medicare Services<br/>â€¢ GP consultation rates<br/>â€¢ Specialist service usage<br/>â€¢ Bulk billing percentages<br/>â€¢ Mental health services]
    end
    
    %% ABS Data Sources  
    subgraph "ABS - Australian Bureau of Statistics"
        ASGS[ASGS Boundaries 2021<br/>â€¢ SA2 geometric boundaries<br/>â€¢ Geographic hierarchy (SA1â†’SA4)<br/>â€¢ Area calculations<br/>â€¢ Coordinate reference systems]
        
        Census2021[Census 2021 DataPacks<br/>â€¢ Population demographics<br/>â€¢ Age/sex distribution<br/>â€¢ Household income<br/>â€¢ Employment statistics<br/>â€¢ Education levels]
        
        SEIFA2021[SEIFA 2021 Indices<br/>â€¢ Index of Disadvantage (IRSD)<br/>â€¢ Index of Advantage (IRSAD)<br/>â€¢ Economic Resources (IER)<br/>â€¢ Education/Occupation (IEO)]
        
        Postcode[Postcode Correspondence<br/>â€¢ Postcode to SA2 mappings<br/>â€¢ Geographic linkage tables<br/>â€¢ Address validation data]
    end
    
    %% BOM Data Sources
    subgraph "BOM - Bureau of Meteorology" 
        ClimateObs[Climate Observations<br/>â€¢ Daily temperature (min/max)<br/>â€¢ Rainfall measurements<br/>â€¢ Humidity readings<br/>â€¢ Solar exposure data]
        
        WeatherNet[Weather Station Network<br/>â€¢ Station coordinates<br/>â€¢ Elevation data<br/>â€¢ Operational status<br/>â€¢ Data quality flags]
        
        AirQualIdx[Air Quality Index<br/>â€¢ PM2.5/PM10 concentrations<br/>â€¢ Ozone levels<br/>â€¢ Air quality categories<br/>â€¢ Health advisories]
        
        UVIndex[UV Index Data<br/>â€¢ Daily UV maximums<br/>â€¢ Sun protection times<br/>â€¢ UV category ratings<br/>â€¢ Seasonal patterns]
    end
    
    %% Extractors
    subgraph "Extraction Layer"
        AIHWExtractors[AIHW Extractors<br/>â€¢ AIHWMortalityExtractor<br/>â€¢ AIHWHospitalisationExtractor<br/>â€¢ AIHWHealthIndicatorExtractor<br/>â€¢ AIHWMedicareExtractor]
        
        ABSExtractors[ABS Extractors<br/>â€¢ ABSGeographicExtractor<br/>â€¢ ABSCensusExtractor<br/>â€¢ ABSSEIFAExtractor<br/>â€¢ ABSPostcodeExtractor]
        
        BOMExtractors[BOM Extractors<br/>â€¢ BOMClimateExtractor<br/>â€¢ BOMWeatherStationExtractor<br/>â€¢ BOMEnvironmentalExtractor]
    end
    
    %% Target Schemas
    subgraph "Target Schema Components"
        HealthSchema[Health Schemas<br/>â€¢ MortalityData<br/>â€¢ HealthcareUtilisation<br/>â€¢ HealthIndicator<br/>â€¢ DiseasePrevalence]
        
        GeographicSchema[Geographic Schemas<br/>â€¢ SA2Coordinates<br/>â€¢ GeographicBoundary<br/>â€¢ SA2BoundaryData<br/>â€¢ UrbanRuralClassification]
        
        DemographicSchema[Demographic Schemas<br/>â€¢ CensusDemographics<br/>â€¢ PopulationProfile<br/>â€¢ HouseholdCharacteristics]
        
        SocioSchema[Socioeconomic Schemas<br/>â€¢ SEIFAScore<br/>â€¢ SEIFAComponent<br/>â€¢ EconomicIndicator]
        
        EnvironmentalSchema[Environmental Schemas<br/>â€¢ WeatherObservation<br/>â€¢ ClimateStatistics<br/>â€¢ EnvironmentalHealthIndex]
    end
    
    %% Target Integration Schema
    MasterSchema[ðŸŽ¯ MasterHealthRecord Schema<br/>â€¢ Primary identification (SA2 code)<br/>â€¢ Geographic dimensions<br/>â€¢ Demographic profile<br/>â€¢ Health profile<br/>â€¢ Socioeconomic profile<br/>â€¢ Environmental profile<br/>â€¢ Data quality metadata]
    
    %% Data Flow Mappings
    GRIM --> AIHWExtractors
    Hospital --> AIHWExtractors
    HealthPerf --> AIHWExtractors
    MedServices --> AIHWExtractors
    
    ASGS --> ABSExtractors
    Census2021 --> ABSExtractors
    SEIFA2021 --> ABSExtractors
    Postcode --> ABSExtractors
    
    ClimateObs --> BOMExtractors
    WeatherNet --> BOMExtractors
    AirQualIdx --> BOMExtractors
    UVIndex --> BOMExtractors
    
    AIHWExtractors --> HealthSchema
    ABSExtractors --> GeographicSchema
    ABSExtractors --> DemographicSchema
    ABSExtractors --> SocioSchema
    BOMExtractors --> EnvironmentalSchema
    
    HealthSchema --> MasterSchema
    GeographicSchema --> MasterSchema
    DemographicSchema --> MasterSchema
    SocioSchema --> MasterSchema
    EnvironmentalSchema --> MasterSchema
    
    %% Field Mapping Examples
    subgraph "Key Field Mappings"
        MappingExample[Field Transformations:<br/>â€¢ AIHW 'SA2_CODE_2021' â†’ 'sa2_code'<br/>â€¢ ABS 'Tot_P_P' â†’ 'total_population'<br/>â€¢ BOM 'TMAX' â†’ 'temperature_max_celsius'<br/>â€¢ SEIFA 'IRSD_SCORE' â†’ 'disadvantage_score'<br/>â€¢ Geographic hierarchy building<br/>â€¢ Rate standardisation<br/>â€¢ Quality score calculation]
    end
    
    %% Apply Styles
    class GRIM,Hospital,HealthPerf,MedServices aihwSource
    class ASGS,Census2021,SEIFA2021,Postcode absSource
    class ClimateObs,WeatherNet,AirQualIdx,UVIndex bomSource
    class HealthSchema,GeographicSchema,DemographicSchema,SocioSchema,EnvironmentalSchema,MasterSchema schemaTarget
    class AIHWExtractors,ABSExtractors,BOMExtractors extractor